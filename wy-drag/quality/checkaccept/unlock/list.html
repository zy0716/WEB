



<div id="ly" class="easyui-layout" fit="true" border="false">
    <div region="center" title="数据列表" iconCls="wy-icon-table" border="false" >

        <!-- 列表开始 -->
        <table id="dg"  url="quality/checkaccept/unlock/listjson" >
            <thead data-options="frozen:true">
            <tr>
                <th field="checkStatus" halign="center" formatter="checkStatusFormater" rowspan="2">验收结果</th>
            </tr>
            </thead>
            <thead>
            <tr>
                <th colspan="12">验收信息</th>
                <th colspan="5">采购信息</th>
                <th colspan="13">药品信息</th>
            </tr>
            <tr>
                <!-- 验收信息 -->
                <th field="lotnumber" halign="center">批号</th>
                <th field="arriveTime" halign="center">到货日期</th>
                <th field="realPurcheasePriceString" halign="center">实际采购价格</th>
                <th field="pruduceDate" halign="center">生产日期</th>
                <th field="periodOfValidity" halign="center">有效期</th>
                <th field="numberOfArrivalString" align="right" halign="center">审核数量</th>
                <!-- <th field="numberOfQualifiedString" align="right" halign="center">最终审核合格数量</th> -->
                <th field="reason" halign="center">验收情况</th>
                <th field="checkDate" halign="center">验收日期</th>
                <th field="inspector" halign="center">验收员</th>
                <th field="result" halign="center">审核处理意见</th>
                <th field="auditDate" halign="center">审核日期</th>
                <th field="auditor" halign="center">审核人</th>

                <!-- 采购信息 -->
                <th field="purchaseOrder.priceString" formatter="ca_priceStringFormater" halign="center" align="right">单价(元)</th>
                <th field="purchaseOrder.count" formatter="ca_countFormater"  halign="center" align="right">数量</th>
                <th field="purchaseOrder.totalPriceString" formatter="ca_totalPriceStringFormater" halign="center" align="right">金额(元)</th>
                <th field="purchaseOrder.purchaseDate" formatter="ca_purchaseDateFormater" halign="center">采购日期</th>
                <th field="purchaseOrder.buyer" formatter="ca_buyerFormater" halign="center">采购员</th>

                <!-- 药品信息 -->
                <th field="purchaseOrder.genericName" formatter="ca_genericNameFormater" halign="center">通用名称</th>
                <th field="purchaseOrder.productName" formatter="ca_productNameFormater" halign="center">商品名称</th>
                <th field="purchaseOrder.dosageForm" formatter="ca_dosageFormFormater" halign="center">剂型</th>
                <th field="purchaseOrder.specification" formatter="ca_specificationFormater" halign="center">规格</th>
                <th field="purchaseOrder.manufacturer" formatter="ca_manufacturerFormater" halign="center">生产厂商</th>
                <th field="purchaseOrder.vendor" formatter="ca_vendorFormater" halign="center">供货单位</th>
                <th field="purchaseOrder.approvalNumber" formatter="ca_approvalNumberFormater" halign="center">批准文号</th>
                <th field="purchaseOrder.drugRang" formatter="ca_drugRangFormater" halign="center">药品范围</th>
                <th field="purchaseOrder.storageCondition" formatter="ca_storageConditionFormater" halign="center">储存条件</th>
                <th field="purchaseOrder.drugCategory" formatter="ca_drugCategoryFormater" halign="center">药品类别</th>
                <th field="purchaseOrder.openStock" formatter="ca_openStockformater" halign="center">是否拆零(拆零规格)</th>
                <th field="purchaseOrder.controlledDrug" formatter="ca_controlledDrugformater" halign="center">管制药品(管制类别|管制数量)</th>
                <th field="purchaseOrder.chineseMedicineArea" formatter="ca_chineseMedicineAreaFormater" halign="center">中药饮片产地</th>
            </tr>

            </thead>

        </table>
        <!-- 列表结束 -->

    </div>
    <!-- <div region="east" style="width:690px;" split="true" border="false" collapsed="true"></div> -->
</div>

<script type="text/javascript">

    $('#dg').datagrid({
        method:'get',
        rownumbers: true,
        pagination: true,
        singleSelect:false,
        toolbar: '#toolbar',
        pageSize: 20
    });

    function checkStatusFormater(value,row,index){
        if(value === '合格'){
            return '<span style="color:green;">合格</span>';
        }else if(value === '不合格'){
            return '<span style="color:red;">不合格</span>';
        }else if(value === '需要审核'){
            return '<span style="color:orange;">需要审核</span>';
        }else if(value === null){
            return '<span style="color:gray;">(请填写详细信息)</span>'
        }
    }

</script>